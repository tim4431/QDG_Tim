{"version": "0.2.3", "nodes": [{"name": "parametrization.direct.0", "type": "parametrization.direct", "simulation_space": "simspace", "init_method": "initializer.uniform_random.0"}, {"name": "simspace", "type": "simulation_space", "eps_fg": {"type": "gds", "gds": "sim_fg.gds", "mat_stack": {"background": {"mat_name": "Air"}, "stack": [{"foreground": {"mat_name": "Si"}, "background": {"mat_name": "Si"}, "extents": [-10000.0, -3000.0], "gds_layer": [300, 0]}, {"foreground": {"mat_name": "Air"}, "background": {"mat_name": "Air"}, "extents": [-3000.0, 0.0], "gds_layer": [300, 0]}, {"foreground": {"mat_name": "Si"}, "background": {"mat_name": "Air"}, "extents": [0.0, 220.0], "gds_layer": [100, 0]}]}}, "eps_bg": {"type": "gds", "gds": "sim_bg.gds", "mat_stack": {"background": {"mat_name": "Air"}, "stack": [{"foreground": {"mat_name": "Si"}, "background": {"mat_name": "Si"}, "extents": [-10000.0, -3000.0], "gds_layer": [300, 0]}, {"foreground": {"mat_name": "Air"}, "background": {"mat_name": "Air"}, "extents": [-3000.0, 0.0], "gds_layer": [300, 0]}, {"foreground": {"mat_name": "Si"}, "background": {"mat_name": "Air"}, "extents": [0.0, 220.0], "gds_layer": [100, 0]}]}}, "mesh": {"type": "uniform", "dx": 40.0}, "sim_region": {"center": [0.0, 0.0, -1140.0], "extents": [15400.0, 40.0, 5720.0]}, "pml_thickness": [10, 10, 0, 0, 10, 10], "selection_matrix_type": "uniform"}, {"name": "initializer.uniform_random.0", "type": "initializer.uniform_random", "min_val": 0.0, "max_val": 1.0}, {"name": "function.sum.1", "type": "function.sum", "functions": ["function.product.0", "function.constant.1", "function.constant.2"]}, {"name": "function.product.0", "type": "function.product", "functions": ["function.power.0", "function.constant.0"]}, {"name": "function.power.0", "type": "function.power", "function": "function.abs.0", "exp": 2.0}, {"name": "function.abs.0", "type": "function.abs", "function": "function.overlap.0"}, {"name": "function.overlap.0", "type": "function.overlap", "simulation": "function.fdfd_simulation.0", "overlap": "overlap.waveguide_mode.0"}, {"name": "function.fdfd_simulation.0", "type": "function.fdfd_simulation", "simulation_space": "simspace", "epsilon": "function.epsilon.0", "source": "source.gaussian_beam.0", "wavelength": 1326.0, "solver": "local_direct"}, {"name": "function.epsilon.0", "type": "function.epsilon", "simulation_space": "simspace", "wavelength": 1326.0}, {"name": "source.gaussian_beam.0", "type": "source.gaussian_beam", "w0": 6275.0, "center": [0.0, 0.0, 920.0], "extents": [14000.0, 14000.0, 0.0], "normal": [0.0, 0.0, -1.0], "theta": -0.17453292519943295, "psi": 1.5707963267948966, "polarization_angle": 0.0, "power": 1.0, "normalize_by_sim": true}, {"name": "overlap.waveguide_mode.0", "type": "overlap.waveguide_mode", "center": [-7000.0, 0.0, 110.0], "extents": [0.0, 1500.0, 1500.0], "normal": [-1.0, 0.0, 0.0], "mode_num": 0, "power": 1.0}, {"name": "function.constant.0", "type": "function.constant", "value": {"real": -1.0, "imag": 0.0}}, {"name": "function.constant.1", "type": "function.constant", "value": {"real": 1.0, "imag": 0.0}}, {"name": "function.constant.2", "type": "function.constant", "value": {"real": 0.0, "imag": 0.0}}, {"name": "mon_eps_1326", "type": "monitor.field", "function": "function.epsilon.0"}, {"name": "mon_field_1326", "type": "monitor.field", "function": "function.fdfd_simulation.0", "center": [0.0, 0.0, 0.0], "normal": [0.0, 1.0, 0.0]}, {"name": "mon_power_1326", "type": "monitor.simple", "function": "function.power.0"}, {"name": "param_obj_final_val", "type": "function.parameter", "initial_value": 1.0}, {"name": "param_discrete_penalty_val", "type": "function.parameter", "initial_value": 1.0}, {"name": "function.discrete_penalty.1", "type": "function.discrete_penalty"}, {"name": "function.sum.2", "type": "function.sum", "functions": ["function.product.0", "function.constant.1", "function.constant.2", "function.product.3"]}, {"name": "function.product.3", "type": "function.product", "functions": ["discrete_scaling", "function.abs.1", "function.power.1", "function.discrete_penalty.0"]}, {"name": "discrete_scaling", "type": "function.parameter", "initial_value": 5.0}, {"name": "function.abs.1", "type": "function.abs", "function": "param_obj_final_val"}, {"name": "function.power.1", "type": "function.power", "function": "function.abs.2", "exp": -1.0}, {"name": "function.abs.2", "type": "function.abs", "function": "param_discrete_penalty_val"}, {"name": "function.discrete_penalty.0", "type": "function.discrete_penalty"}, {"name": "parametrization.grating.0", "type": "parametrization.grating", "simulation_space": "simspace", "inverted": true}, {"name": "function.grating_feature_constraint.0", "type": "function.grating_feature_constraint", "simulation_space": "simspace", "min_feature_size": 80.0, "boundary_constraint_scale": 1.0}], "transformations": [{"name": "opt_cont", "parametrization": "parametrization.direct.0", "transformation": {"type": "scipy_optimizer", "optimizer": "L-BFGS-B", "objective": "function.sum.1", "monitor_lists": {"callback_monitors": ["mon_eps_1326", "mon_field_1326", "mon_power_1326"], "start_monitors": ["mon_eps_1326", "mon_field_1326", "mon_power_1326"], "end_monitors": ["mon_eps_1326", "mon_field_1326", "mon_power_1326"]}, "optimization_options": {"maxiter": 50}}}, {"name": "opt_cont_disc", "parametrization": "parametrization.direct.0", "parameter_list": [{"parameter": "param_obj_final_val", "function": "function.sum.1", "parametrization": "parametrization.direct.0"}, {"parameter": "param_discrete_penalty_val", "function": "function.discrete_penalty.1", "parametrization": "parametrization.direct.0"}], "transformation": {"type": "scipy_optimizer", "optimizer": "L-BFGS-B", "objective": "function.sum.2", "monitor_lists": {"callback_monitors": ["mon_eps_1326", "mon_field_1326", "mon_power_1326"], "start_monitors": ["mon_eps_1326", "mon_field_1326", "mon_power_1326"], "end_monitors": ["mon_eps_1326", "mon_field_1326", "mon_power_1326"]}, "optimization_options": {"maxiter": 50}}}, {"name": "cont_to_disc", "parametrization": "parametrization.grating.0", "transformation": {"type": "grating_edge_fit_transformation", "parametrization": "parametrization.direct.0", "min_feature": 88.0}}, {"name": "opt_disc", "parametrization": "parametrization.grating.0", "transformation": {"type": "scipy_optimizer", "optimizer": "SLSQP", "objective": "function.sum.1", "constraints_ineq": ["function.grating_feature_constraint.0"], "monitor_lists": {"callback_monitors": ["mon_eps_1326", "mon_field_1326", "mon_power_1326"], "start_monitors": ["mon_eps_1326", "mon_field_1326", "mon_power_1326"], "end_monitors": ["mon_eps_1326", "mon_field_1326", "mon_power_1326"]}, "optimization_options": {"maxiter": 200}}}]}